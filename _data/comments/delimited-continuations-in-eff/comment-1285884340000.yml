name: Dan Doel
date: '2010-10-01 00:05:40'
url: ''
message: "<blockquote>Regarding resetting anywhere, is this what is supposed to happen</blockquote>\r\n\r\nYes. The shadowing seems to work there. However,\r\n\r\n<blockquote>And yes, a continuation can definitely have its own control effects in eff.</blockquote>\r\n\r\nIn that case, I think we need more information to decide whether this actually implements shift/reset, or some other set of operators. For instance:\r\n<code>\r\nwith reset: shift (lambda k: k 5 + 1) + shift (lambda l: 0)\r\n</code>\r\n\r\nFor shift/reset semantics, that should be 1. For control/prompt, it's 0. Further, I wonder how the shadowing above works. What answer does:\r\n<code>\r\nwith reset: shift (lambda k: (with reset: k 5) + 1) + shift (lambda l: 0)\r\n</code>\r\n\r\ngive? With a single prompt shift/reset, control/prompt, etc. the answer is 1. If the prompts are distinct, though, a control/prompt-alike will give 0, instead of 1, because, after a bit of munging, we get (I think this is accurate):\r\n<code>\r\nwith reset as p: (with reset as q: 5 + p.shift (lambda l: 0)) + 1\r\n</code>\r\n\r\nSo the shift (control) captures both the (5 +) and the (+ 1), and discards them. Inner resets might actually correspond to a handler (An inner <code>reset p M</code> would correspond to <code>handle M with operation p.shift: ...</code>), but that's just a guess.\r\n\r\nThere's also, of course, another axis you can vary delimited operators along: whether the shift/control as a block is re-delimited. Operators where it isn't are called (in the only place I've seen them, at least) shift0 and control0. So (going back to something more Haskell like):\r\n<code>\r\nreset (64 + reset (0 + shift0 (\\k -&gt; shift0 (\\_ -&gt; k 0)))) = 0\r\nreset (64 + reset (reset (0 + shift0 (\\k -&gt; shift0 (\\_ -&gt; k 0))))) = 64\r\n</code>\r\n\r\nand similarly:\r\n<code>\r\nreset (64 + reset (control0 (\\k -&gt; k 5) + control0 (\\_ -&gt; 0))) = 0\r\nreset (64 + reset (reset (control0 (\\k -&gt; k 5) + control0 (\\_ -&gt; 0)))) = 64\r\n</code>\r\n\r\nbut I don't expect that's how the eff works."
email: af6ee853a79ce70a9ce68ae1e1fc852c
